<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN" "../dtd/docbook.dtd"> 
               
<chapter xml:id="EclipseDesigner">
  <title>Eclipse Designer</title>

  <section xml:id="eclipse.Installation">
    <title>安装</title>
    <para>
      <orderedlist>
        <listitem>
          <para>打开Eclipse的官网，进入下载页面。地址：<link xlink:href="http://eclipse.org/downloads/"
              >http://eclipse.org/downloads/</link></para>
          <para>点击如图右方所示红框部分，进入Juno或Kepler版本的下载界面(下面以juno为例)。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>点击如图红框部分进入Juno所有版本的下载界面。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.2.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>如图所示选择Juno的Java EE版本下载，注意右边选择对应本机系统的版本。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.3.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>解压下载好的文件，打开Eclipse。</para>
          <para>如图所示点击右上角的帮助(Help)菜单，选择安装新软件(Install New Software)。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.4.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>如果是首次安装，需要安装一个依赖插件，如果是更新安装可跳过此步骤，点击添加。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.5.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>将下面这个站点加入。</para>
          <programlisting language="properties"><![CDATA[

Groovy http://dist.springsource.org/release/GRECLIPSE/e4.2/
]]> </programlisting>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.12.png" />
            </imageobject>
          </mediaobject>
          <para>添加好之后点击确定，然后勾选1、3两项，点击下一步。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.10.png" />
            </imageobject>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.11.png" />
            </imageobject>
          </mediaobject>
          <para>在许可信息这点击同意，然后点击下一步。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.13.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para> 安装完毕后会提示重启信息，我们选择重启。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.19.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>重启完毕后，我们再次回到安装软件界面，点击添加按钮。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.5.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>选择本地安装包模式。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.6.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>选择我们的插件包，名称可以随便填写，然后点击确定。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.14.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>安装界面会显示我们的插件包信息，勾选起来，点击下一步。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.15.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>点击下一步，之后在许可信息的界面点击同意，点击完成。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.16.png" />
            </imageobject>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.17.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para> 在安装过程中会弹出，遇到请点击确定，即可完成安装。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.18.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para> 安装完毕后会提示重启信息，我们选择重启。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.19.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para> 重启完成后，看到流程设置的菜单后，表示平台已经顺利安装成功。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.20.png" />
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </para>
  </section>
  
  <section xml:id="eclipse.template">
    <title>流程模板</title>
    <para>
      <orderedlist>
        <listitem>
          <para>在菜单中选择文件(File)或者右键点击项目树的菜单均可选择新建(New)--其他(Other...)</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.7.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>如图所示选择FixFlow目录下的“New FixFlow BPMN”。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.8.png" />
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>系统默认内置了两套模板：默认模板和定时任务模板，选择需要按哪个模板创建新流程即可。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipseDesigner.9.png" />
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </para>
  </section>
  
  <section xml:id="eclipse.customtemplate">
    <title>创建自定义流程模板</title>
    <para>
      <orderedlist>
        <listitem>
          <para>流程自定义模板包含三个文件：bpmn文件，png模板图片文件和properties属性文件，放在fixflow-expand\src\main\resources\template\flow-template目录下。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="300" fileref="images/customTemplate.1.png" />
            </imageobject>
          </mediaobject>
          <para>结构如上图所示，需要在properties文件里面指定一系列的流程属性，例：</para>
          <programlisting language="properties"><![CDATA[

model_id default_process //流程模板的ID
model_name 默认模板 //流程模板的名字，显示在新建流程模板的下拉框里
model_file default_process.bpmn //流程文件名
model_image_name default_process.png //流程模板图片名
model_description 用默认流程模板创建一个新的流程 //流程模板描述
]]> </programlisting>
        </listitem>
      </orderedlist>
    </para>
  </section>
  <section xml:id="eclipse.connector">
    <title>管理连接器</title>
    <para></para>
    
  </section>
  <section xml:id="eclipse.dataVariable">
    <title>配置数据变量</title>
    <para>
      <orderedlist>
        <listitem>
          <para>在设计器上方的菜单中选择“数据变量”。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="300" fileref="images/eclipse.dataVariable.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>这里的配置与设计器中的使用对应如下图所示。（图片较大，右键可查看原图）</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="800" fileref="images/eclipse.dataVariable.2.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </para>
  </section>
  <section xml:id="eclipse.processEngine">
    <title>流程引擎配置</title>
    <para></para>
    
  </section>
  <section xml:id="eclipse.time">
    <title>定时任务管理</title>
    <para>
      <orderedlist>
        <listitem>
          <para>在设计器上方的菜单中选择“定时任务”。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="300" fileref="images/eclipse.time.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>在这个界面上，我们可以对某一个定时任务进行暂停和继续操作，可以双击或者选中某个任务进行更为细致的编辑。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.time.2.png"/>
            </imageobject>
          </mediaobject>
          <programlisting language="properties"><![CDATA[

暂停 //暂停当前选中定时任务中所有的触发器
继续 //继续当前选中定时任务中所有的触发器
删除 //删除当前选中的定时任务
]]> </programlisting>
        </listitem>
        <listitem>
          <para>在这个界面上，我们可以针对某一个定时任务里的触发器进行单独设定。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.time.3.png"/>
            </imageobject>
          </mediaobject>
          <programlisting language="properties"><![CDATA[

暂停 //暂停当前选中的触发器
继续 //继续当前选中的触发器
删除 //删除当前选中的触发器
]]> </programlisting>
        </listitem>
        <listitem>
          <para>如果定时任务配置中没有已经发布的定时任务（如何发布定时任务？），在设计器上方的菜单中选择“流程引擎”。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="300" fileref="images/eclipse.time.4.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>在此配置定时任务所连接的数据库。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.time.5.png"/>
            </imageobject>
          </mediaobject>
          <programlisting language="properties"><![CDATA[

是否启用               //勾上：启动定时任务 不勾：不启动定时任务
是否跟随平台数据库配置 //勾上：跟随数据库标签中的数据库配置 不勾：自己选择数据库配置
]]> </programlisting>
        </listitem>
      </orderedlist>
    </para>
  </section>
  <section xml:id="eclipse.def">
    <title>流程定义管理</title>
    <para>
      <orderedlist>
        <listitem>
           <para>在设计器上方的菜单中选择“定义管理”。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="300" fileref="images/eclipse.def.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>这里可以管理当前已经发布的所有流程。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.def.2.png"/>
            </imageobject>
          </mediaobject>
          <programlisting language="properties"><![CDATA[

选中组--删除定义       //删除选中流程定义并清空该流程实例数据
选中组--删除实例       //删除选中流程实例数据
所有组--清空实例       //清空所有流程实例数据
所有组--清空所有       //清空所有流程数据（慎用）
下载组--下载定义       //下载选中流程的流程图与流程定义
]]> </programlisting>
        </listitem>
      </orderedlist>
    </para>
  </section>
  
  <section xml:id="eclipse.theme">
    <title>设计器主题</title>
    <para>
      <orderedlist>
        <listitem>
          <para>在设计器上方的菜单中选择“界面主题”。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="300" fileref="images/eclipse.theme.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>这里可以选择流程设计器的整套主题或具体图形的颜色搭配。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.theme.2.png"/>
            </imageobject>
          </mediaobject>
          <programlisting language="properties"><![CDATA[

Connections                   //线条
Events                        //事件
Gateways                      //网关
Activites                     //活动
Data Elements                 //数据元素
Containers and Artifacts      //容器和人工
]]> </programlisting>
        </listitem>
      </orderedlist>
    </para>
  </section>
  
  <section xml:id="eclipse.cache">
    <title>设计器缓存</title>
    <para>
      <orderedlist>
        <listitem>
          <para>在设计器上方的菜单中选择“重置缓存”，可以清空当前的流程缓存(数据库连接信息等)。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="300" fileref="images/eclipse.cache.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </para>
  </section>
  
  <section xml:id="eclipse.automaticConnection">
    <title>自动连线</title>
    <para>
      <orderedlist>
        <listitem>
          <para>在设计器画流程图的时候，在流程图空白处右键，可以选择开启或者关闭自动连线。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.automaticConnection.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </para>
  </section>
  
  <section xml:id="eclipse.lane">
    <title>Lane的技巧</title>
    <para>
      <orderedlist>
        <listitem>
          <para>在设计器画流程图的时候，用到的嵌套如图所示。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.lane.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </para>
  </section>
  
  <section xml:id="eclipse.subprocesses">
    <title>子流程技巧</title>
    <para>
      <orderedlist>
        <listitem>
          <para>子流程可以折叠。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.subprocess.1.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>折叠后样式。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.subprocess.2.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>子流程可以另开个流程图TAB页进行绘制。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.subprocess.3.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>另开TAB页后的样式。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.subprocess.4.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
        <listitem>
          <para>原图上的显示。</para>
          <mediaobject>
            <imageobject>
              <imagedata align="center" contentwidth="600" fileref="images/eclipse.subprocess.5.png"/>
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </para>
  </section>
  
</chapter>
